[
  {
    "objectID": "license-web.html",
    "href": "license-web.html",
    "title": "License",
    "section": "",
    "text": "Copyright (c) 2026 Nic Crane. All Rights Reserved.\nThis work, including all associated materials, code, documentation, and content, is the proprietary property of Nic Crane.\nNo part of this work may be reproduced, distributed, or transmitted in any form or by any means, including photocopying, recording, or other electronic or mechanical methods, without the prior written permission of the copyright holder.\nFor permission requests, please contact the copyright holder."
  },
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "Code",
    "section": "",
    "text": "If you are not working in Posit Cloud, or you do not have the data/ directory showing up in Posit Cloud, you can download them by running:\n# Download workshop materials (slides + data)\ndownload.file(\n\n  url = \"https://tinyurl.com/rainbowrllms\",\n  destfile = \"workshop-materials.zip\"\n)\n\n# Unzip and move contents to root\nunzip(\"workshop-materials.zip\")\nfile.copy(\n  list.files(\"rainbowrworkshop-materials\", full.names = TRUE),\n   \".\", recursive = TRUE)\nunlink(\"rainbowrworkshop-materials\", recursive = TRUE)"
  },
  {
    "objectID": "code.html#getting-started-with-llms-in-r",
    "href": "code.html#getting-started-with-llms-in-r",
    "title": "Code",
    "section": "3 - Getting Started with LLMs in R",
    "text": "3 - Getting Started with LLMs in R\n## Editing your .Renviron\n\nusethis::edit_r_environ()\n\n\n\n\n\n## Starting a conversation\n\nlibrary(ellmer)\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\n\n\n\n\n\n## Sending a message to the LLM\n\nlibrary(ellmer)\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat(\"What is the most popular LGBT movie of all time? \n  Answer succinctly.\")\n\n\n\n\n\n## Turns\n\nchat\n\n\n\n\n\n## Continuing the conversation\n\nchat$chat(\"Who were the stars of that movie?\")\nchat$chat(\"What year was it released?\")\nchat\n\n\n\n\n\n## Reset - just start a new chat\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat(\"What were we saying earlier?\")\n\n\n\n\n\n## Training cutoff date\n\nchat$chat(\"what date is it right now?\")\n\nYour Turn\n\nSet up your API key using usethis::edit_r_environ() + restart R\nStart a conversation: chat_openrouter(model = \"google/gemini-2.5-flash\")\nAsk what the most popular LGBT movie was in 1995 and then 2026"
  },
  {
    "objectID": "code.html#prompt-engineering",
    "href": "code.html#prompt-engineering",
    "title": "Code",
    "section": "4 - Prompt Engineering",
    "text": "4 - Prompt Engineering\n## Load the data to work with\n\nlibrary(tidyverse)\nmovies &lt;- read_csv(\"data/movies.csv\")\n\npride_synopsis &lt;- movies |&gt;\n  filter(title == \"Pride\") |&gt;\n  pull(synopsis)\n\npride_synopsis\n\n\n\n\n\n## Ask questions\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat(\"What year was this movie set in?\", pride_synopsis)\n\n\n\n\n\n## The LLM is very chatty!\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat(\"Summarise this movie:\", pride_synopsis)\n\n\n\n\n\n## Setting the system prompt\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = \"Respond in 35 words or fewer\"\n)\nchat$chat(\"Summarise this movie:\", pride_synopsis)\n\n\n\n\n\n## Run it again though...responses vary\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = \"Respond in 35 words or fewer\"\n)\nchat$chat(\"Summarise this movie:\", pride_synopsis)\n\n\n\n\n\n## 1. Define a role - prompt\n\nprompt &lt;- \"You are a movie summariser whose job is to sum up the\ngenre and themes of movies to help users decide if they want to watch.\nRespond in 50 words or fewer\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\nchat$chat(\"Summarise the movie: \", pride_synopsis)\n\n# if we run it again we get different output\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\nchat$chat(\"Summarise the movie: \", pride_synopsis)\n\n\n\n\n##  2 - Defining the output format - prompt\n\nprompt &lt;- \"You are a movie summariser whose job is to sum up the \ngenre and themes of movies to help users decide if they want to watch.\nRespond in 50 words or fewer\n\n## Output format\n\nPlot outline: a 1 sentence description\n\nGenre: movie genre\n\nSetting: time and place \n\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\n\nchat$chat(\"Summarise the movie: \", pride_synopsis)\n\n\n\n\n\n## 3 - Getting more specific - prompt\n\nprompt &lt;- \"You are a movie summariser whose job is to sum up the \ngenre and themes of movies to help users decide if they want to watch.\nRespond in 50 words or fewer\n\n## Output format\n\nPlot outline: a 1 sentence description\n\nGenre: movie genre (see choices below)\n\nSetting: time and place \n\n## Choices\n\nPossible movie genres to choose from: Action, Comedy, Drama,  \nHorror, Science, Fiction, Thriller, Romance, Fantasy, Adventure, Documentary\n\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\n\nchat$chat(\"Summarise the movie: \", pride_synopsis)\n\n\n\n\n\n## 4 - Iterate - be more strongly worded - prompt\n\nprompt &lt;- \"You are a movie summariser whose job is to sum up the \ngenre and themes of movies to help users decide if they want to watch.\nRespond in 50 words or fewer\n\n## Output format\n\nPlot outline: a 1 sentence description\n\nGenre: movie genre (see choices below)\n\nSetting: time and place \n\n## Choices\n\nYou MUST only choose genres that appear on this list: Action, Comedy, \nDrama,  Horror, Science, Fiction, Thriller, Romance, Fantasy, Adventure, \nDocumentary\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\n\nchat$chat(\"Summarise the movie: \", pride_synopsis)\n\nYour turn\n\nPick a different movie from the movie dataset and run the “best” version of the prompt on it\nUpdate the prompt to also extract information about the movie’s themes\nSee if you can update it to show what you would want to see in a summary"
  },
  {
    "objectID": "code.html#extracting-structured-data",
    "href": "code.html#extracting-structured-data",
    "title": "Code",
    "section": "5 - Extracting Structured Data",
    "text": "5 - Extracting Structured Data\n## The problem with unstructured output\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\noutput &lt;- chat$chat(\n  \"Extract year and location from this data\n  \n  ## Output format\n  \n  Year: \n  Location\",\n  pride_synopsis\n)\noutput\nclass(output)\n\n\n\n\n## Extracting a single value\n\nyear_type &lt;- type_integer(\"Year the movie is set in\")\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat_structured(pride_synopsis, type = year_type)\n\n\n\n\n\n## Extracting text\n\nlocation_type &lt;- type_string(\"Primary location of the movie\")\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat_structured(pride_synopsis, type = location_type)\n\n\n\n\n\n## Constraining to specific choices\n\nmovie_genres &lt;- c(\n  \"Action\", \"Comedy\", \"Drama\", \"Horror\",\n  \"Science Fiction\", \"Thriller\", \"Romance\",\n  \"Fantasy\", \"Adventure\", \"Documentary\"\n)\n\ngenre_type &lt;- type_enum(movie_genres, \"The genre of the movie\")\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat_structured(pride_synopsis, type = genre_type)\n\n\n\n\n\n## Combining multiple fields\n\nyear_type &lt;- type_integer(\"Year the movie is set in\")\ngenre_type &lt;- type_enum(movie_genres, \"The genre of the movie\")\n\nmovie_info_type &lt;- type_object(\n  year_set = year_type,\n  genre = genre_type\n)\n\nchat &lt;- chat_openrouter(model = \"google/gemini-2.5-flash\")\nchat$chat_structured(pride_synopsis, type = movie_info_type)\n\n\n\n\n\n## Processing multiple movies\n\nprompts &lt;- paste(\"Extract data from this movie synopsis:\", movies$synopsis)\n\n# parallel_chat_structured is a little different\noutput &lt;- parallel_chat_structured(\n  chat = chat_openrouter(model = \"google/gemini-2.5-flash\"),\n  prompts = as.list(prompts),\n  type = movie_info_type\n)\n\noutput\n\n\n\n\n\n## Combining them\n\nmovies_with_genres &lt;- bind_cols(movies, output)\nmovies_with_genres\n\n## Save to a file\nreadr::write_csv(\"./data/movies_with_genres.csv\")\n\nYour turn\n\nPick a different movie from the dataset\nExtract the year and genre using chat_structured()\nProcess all movies using parallel_chat_structured()\nBonus: Add a new field for the movie’s tone using type_enum() with choices like “Uplifting”, “Dark”, “Comedic”, “Bittersweet”"
  },
  {
    "objectID": "code.html#tool-calling",
    "href": "code.html#tool-calling",
    "title": "Code",
    "section": "6 - Tool Calling",
    "text": "6 - Tool Calling\n## Initialise a chat and register the tool\n\nprompt &lt;- \"You are a movie recommender bot designed to help users \npick potential films to add to their watch list. Sample a\nrandom film and give the user a 20 word summary of it.\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\n\n\n\n\n\n## Use the tool!\n\nchat$chat(\"What movie should I watch this weekend?\")\n\n\n\n\n\n## Update the function to filter the data\n\nmovie_genres &lt;- c(\n  \"Action\", \"Comedy\", \"Drama\", \"Horror\",\n  \"Science Fiction\", \"Thriller\", \"Romance\",\n  \"Fantasy\", \"Adventure\", \"Documentary\"\n)\n\nsample_and_filter_movies &lt;- function(genre_choice = movie_genres) {\n  read.csv(\"data/movies_with_genres.csv\") |&gt;\n    filter(genre %in% genre_choice) |&gt;\n    slice_sample(n = 1)  \n}\n\n\n\n\n\n## Define tool using updated function\n\nsample_and_filter_movies_tool &lt;- tool(\n  sample_and_filter_movies,\n  description = \"Randomly sample a movie from the dataset\",\n  arguments = list(\n    genre_choice = type_array(\n      type_enum(\n        values = movie_genres,\n        \"Movie genres to choose from\"\n      )\n    )\n  )\n)\n\n\n\n\n\n## Register the updated tool\n\nprompt &lt;- \"You are a movie recommender bot designed to help users \npick potential films to add to their watch list. Sample a\nrandom film and give the user a 20 word summary of it. \n\"\n\nchat &lt;- chat_openrouter(\n  model = \"google/gemini-2.5-flash\",\n  system_prompt = prompt\n)\n\nchat$register_tool(sample_and_filter_movies_tool)\n\n\n\n\n\n## Ask the question\n\nlive_console(chat)\n\n# What movie should I watch tonight? I like scifi!\n\n\nYour turn\n\nTry using the tool and ask different questions and see if you can get them LLM to call it repeatedly"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "LLMs in R for Data Analysis",
    "section": "",
    "text": "by Nic Crane\nWednesday 25th February 2026, 19:00-21:00 UTC / 14:00-16:00 ET / 11:00-13:00 PT\n\n\nWorkshop Overview\nLLMs can be massively useful in R workflows, when used in the right places and if you’re aware of not only the benefits, but also the risks. In this hands-on workshop, you’ll learn how to use LLMs programmatically in R, and come away with both the confidence to experiment and a working script that extracts data from unstructured text.\nWe’ll look at where LLMs can help, where they’ll let you down, and techniques for making your results more trustworthy. You’re going to leave with a practical sense of what’s possible and where to be cautious.\nWhat you’ll learn:\n\nGetting started with LLMs in R using {ellmer}\nPrompt engineering for more predictable results\nExtracting structured data from unstructured text\nUsing LLMs to call R functions (tool calling)\n\n\n\nWorkshop Prework\n\nEnvironment\nYou’ll need an R environment to work in; this could be RStudio or Positron on your own laptop, or an account on Posit Cloud via a web browser.\nIf you’re on a work machine with restrictions on installing software or connecting to external APIs, Posit Cloud is a good option as everything runs in your browser.\n\n\nPackages\nInstall the required packages:\ninstall.packages(c(\"ellmer\", \"dplyr\", \"readr\", \"tidyr\", \"usethis\"))\n\n\nAPI keys\nYou’ll need an API key from an LLM provider. You will have been sent this on the day of the workshop.\n\n\nTest setup\nAfter installing packages and setting up your API key, verify everything works:\n\n\n\nWorkshop Schedule\n\nSection 0: Welcome and Setup\nSection 1: Getting Started with LLMs in R\nSection 2: Prompt Engineering\nSection 3: Structured Output\nSection 4: Tool Calling\nSection 5: Wrap-up and Resources\n\n\n\nInstructor\nNic Crane is an R consultant with a background in data science and software engineering. They are passionate about open source, and learning and teaching all things R.\n\n\nCode\nAll the code from the workshop can be found on the Code and Exercises page.\n\nCopyright © 2026 Nic Crane. All Rights Reserved."
  }
]